{"version":3,"sources":["components/Common/Button.jsx","components/Common/Input.jsx","utils/consts.js","utils/history.js","components/OnBoard/OnBoard.jsx","components/Game/styled.js","components/Game/utils.js","components/Game/Controls.jsx","components/Game/Grid.jsx","components/Game/Game.jsx","App.jsx","index.js"],"names":["Btn","styled","button","Button","label","onClick","disabled","type","style","defaultProps","Input","input","FieldLabel","FieldTitle","span","InputField","title","inputProps","ROUTES","history","createBrowserHistory","OnBoard","useHistory","padding","maxWidth","href","rel","target","marginTop","push","GameLayout","div","ControlsLayout","StyledControls","StyledGrid","width","StyledCell","color","$revealed","MODES","CELL_STATE","defaultSettings","height","mines","isSuperman","validateSettings","settings","Number","formatSettings","getCellNeighbors","xCor","yCor","reduce","validNeighbors","nearByX","nearByY","neighborXcor","neighborYcor","getMappedGridData","emptyGrid","emptyRow","Array","fill","map","getEmptyGridData","gridInitalState","row","minesCordinates","grid","updatedGrid","forEach","Infinity","updateNeighborsMinesCount","possibleCordinates","length","randomX","Math","floor","random","randomY","generateMinesCordinates","getNeighborsToReveal","gridState","filter","isHidden","isFlagged","hash","x","y","Controls","mode","onNewGame","usedFlags","useState","setSettings","handleInput","e","fieldName","value","onChange","placeholder","MemoCell","React","memo","minesCount","state","corX","corY","fontWeight","getDisplayElement","prevProps","nextProps","Grid","gridData","onCellClick","cells","key","initialState","flags","Map","isShiftDown","ACTIONS","reducer","payload","mappedGrid","newState","revealedData","isFlagRemoved","size","alert","cordinates","newGridState","newFlagsState","flagHash","delete","set","handleFlags","neighborsToReveal","alreadyChecked","newNighbors","neighbors","realNewNeighbors","cor","has","revealCells","didLose","Game","useReducer","dispath","handleNewGame","errorMessage","newSettings","useEffect","from","values","every","flagXcor","flagYcor","checkIfWon","handleKeyDown","handleKeyUp","window","addEventListener","removeEventListener","App","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e2f60d3b.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components/macro';\n\nconst Btn = styled.button`\n  display: block;\n  height: 3rem;\n  padding: 0.5rem 2rem;\n  border-left: solid 6px var(--main-color);\n  color: var(--main-color);\n  font-weight: bold;\n\n  :disabled {\n    cursor: not-allowed;\n    color: #b5b5b5;\n    background-color: #e6e6e6;\n  }\n\n  :active {\n    transform: translateY(2px);\n  }\n`;\n\nexport const Button = ({ label, onClick, disabled = false, type = 'button', style }) => (\n  <Btn onClick={onClick} disabled={disabled} type={type} style={style}>\n    {label}\n  </Btn>\n);\n\nButton.defaultProps = {\n  onClick: () => {},\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  disabled: PropTypes.bool,\n  label: PropTypes.string,\n  type: PropTypes.string,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components/macro';\n\nexport const Input = styled.input`\n  padding: 0 1.5rem;\n  height: 2.5rem;\n  width: 5rem;\n\n  ::placeholder {\n    color: #ababab;\n  }\n\n  :disabled {\n    color: #c7c7c7;\n    background-color: #f6f6f6;\n  }\n`;\n\nexport const FieldLabel = styled.label`\n  display: block;\n  padding: 0;\n  margin: 0;\n`;\n\nexport const FieldTitle = styled.span`\n  display: block;\n  margin-bottom: 1rem;\n  font-weight: 500;\n  font-size: 14px;\n  color: #494949;\n`;\n\nexport const InputField = ({ title, ...inputProps }) => {\n  return (\n    <FieldLabel>\n      {title && <FieldTitle>{title}</FieldTitle>}\n      <Input {...inputProps} />\n    </FieldLabel>\n  );\n};\n\nInputField.propTypes = {\n  title: PropTypes.string,\n};\n","export const ROUTES = {\n  BASE: '',\n  PLAY: '/play',\n};\n","import { createBrowserHistory } from 'history';\n\nexport const history = createBrowserHistory();\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Button } from '../Common';\nimport { ROUTES } from '../../utils';\n\nconst OnBoard = () => {\n  const history = useHistory();\n\n  return (\n    <div style={{ padding: '3rem' }}>\n      <h1>Welcome to Minesweeper</h1>\n      <p style={{ maxWidth: '80rem' }}>\n        If you're a Windows' user chances are that you already have the game on your computer. This\n        guide will help you in completing your first game. The rule of the game is simple, the\n        number on a block shows the number of mines adjacent to it and you have to flag all the\n        mines.\n      </p>\n      <h4>Few Game Rules:</h4>\n      <ul>\n        <li>\n          <strong>Flag:</strong> Put a flag in a zone when you have confirmed that there is a mine.\n        </li>\n        <li>\n          <strong>Superman:</strong> Play new game with all cells revealed!\n        </li>\n        <li>\n          <strong>Rest:</strong> Click it if you want to reset the game\n        </li>\n      </ul>\n      <a\n        href=\"https://www.instructables.com/id/How-to-play-minesweeper/\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        For more information about Minesweeper\n      </a>\n      <Button\n        label=\"Click to start playing\"\n        style={{ marginTop: '2rem' }}\n        onClick={() => history.push(ROUTES.PLAY)}\n      />\n      <p style={{ marginTop: '2rem' }}>Made by Eylon Mizrahi</p>\n    </div>\n  );\n};\n\nexport default OnBoard;\n","import styled from 'styled-components/macro';\n\nexport const GameLayout = styled.div``;\n\nexport const ControlsLayout = styled.div`\n  width: 40rem;\n  margin: 5rem auto;\n`;\n\nexport const StyledControls = styled.div`\n  display: flex;\n  justify-content: space-around;\n  margin-bottom: 2rem;\n`;\n\nexport const StyledGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(${({ width }) => width}, auto);\n  justify-content: center;\n  overflow: scroll;\n`;\n\nexport const StyledCell = styled.button`\n  width: 3rem;\n  height: 3rem;\n  text-align: center;\n  border: 1px solid black;\n  background-color: ${({ color }) => color};\n  opacity: ${({ $revealed }) => ($revealed ? 0.5 : 0.8)};\n`;\n","export const MODES = {\n  PLAYING: 'playing',\n  LOST: 'lost',\n  WON: 'won',\n};\n\nexport const CELL_STATE = {\n  REVEALED: 1,\n  HIDDEN: 0,\n  FLAGGED: -1,\n};\n\nexport const defaultSettings = { width: 10, height: 10, mines: 5, isSuperman: false };\n\nconst formatSettings = ({ width, height, mines, isSuperman }) => {\n  return { width: Number(width), height: Number(height), mines: Number(mines), isSuperman };\n};\n\nexport const validateSettings = (settings) => {\n  const { width, height, mines, isSuperman } = formatSettings(settings);\n  const isValidWidth = width > 0 && width <= 300;\n  const isValidHeight = height > 0 && height <= 300;\n  const isValidMines = mines > 0 && mines <= 90000 && mines <= width * height;\n  const isValid = isValidWidth && isValidHeight && isValidMines;\n  const error = isValid ? false : 'Allowed Settings: Height, Width up to 300, mines up to 90,000';\n  return [error, { width, height, mines, isSuperman }];\n};\n\nexport const getEmptyGridData = ({ width, height }) => {\n  const emptyRow = Array(width).fill(0);\n  const emptyGrid = Array(height)\n    .fill(null)\n    .map(() => [...emptyRow]);\n  return emptyGrid;\n};\n\nexport const generateMinesCordinates = ({ width, height, mines }) => {\n  const minesCordinates = [];\n  const possibleCordinates = {};\n  while (minesCordinates.length < mines) {\n    const randomX = Math.floor(Math.random() * width);\n    const randomY = Math.floor(Math.random() * height);\n    const isTakenSpace = possibleCordinates[randomX] && possibleCordinates[randomX][randomY];\n    if (!isTakenSpace) {\n      possibleCordinates[randomX] = { ...possibleCordinates[randomX], [randomY]: true };\n      minesCordinates.push([randomX, randomY]);\n    }\n  }\n  return minesCordinates;\n};\n\nconst getCellNeighbors = ([xCor, yCor], { width, height }) => {\n  const nearBy = [\n    [-1, -1],\n    [-1, 0],\n    [-1, 1],\n    [0, -1],\n    [0, 1],\n    [1, -1],\n    [1, 0],\n    [1, 1],\n  ];\n  const neighbors = nearBy.reduce((validNeighbors, [nearByX, nearByY]) => {\n    const neighborXcor = xCor + nearByX;\n    const neighborYcor = yCor + nearByY;\n    const inXrange = neighborXcor >= 0 && neighborXcor < width;\n    const inYrange = neighborYcor >= 0 && neighborYcor < height;\n    if (inXrange && inYrange) {\n      return [...validNeighbors, [neighborXcor, neighborYcor]];\n    } else {\n      return validNeighbors;\n    }\n  }, []);\n  return neighbors;\n};\n\nconst updateNeighborsMinesCount = (minesCordinates, grid, settings) => {\n  const updatedGrid = grid.map((row) => [...row]);\n  minesCordinates.forEach(([xCor, yCor]) => {\n    updatedGrid[yCor][xCor] = Infinity;\n    const neighbors = getCellNeighbors([xCor, yCor], settings);\n    neighbors.forEach(\n      ([neighborXcor, neighborYcor]) => (updatedGrid[neighborYcor][neighborXcor] += 1),\n    );\n  });\n  return updatedGrid;\n};\n\nexport const getMappedGridData = (settings) => {\n  const emptyGrid = getEmptyGridData(settings);\n  const gridInitalState = emptyGrid.map((row) => [...row]);\n  const minesCordinates = generateMinesCordinates(settings);\n  const mappedGrid = updateNeighborsMinesCount(minesCordinates, emptyGrid, settings);\n  return [mappedGrid, gridInitalState];\n};\n\nconst getNeighborsToReveal = ([xCor, yCor], { gridState, settings }) => {\n  const neighbors = getCellNeighbors([xCor, yCor], settings);\n  const neighborsToReveal = neighbors.filter(([neighborXcor, neighborYcor]) => {\n    const isHidden = gridState[neighborYcor][neighborXcor] === CELL_STATE.HIDDEN;\n    const isFlagged = gridState[neighborYcor][neighborXcor] === CELL_STATE.FLAGGED;\n    return isHidden && !isFlagged;\n  });\n  return neighborsToReveal;\n};\n\nexport const hash = ([x, y]) => 0.5 * (x + y) * (x + y + 1) + y;\n\nexport const revealCells = (neighborsToReveal = [[]], { gridData, gridState, settings }) => {\n  const newGridState = gridState.map((row) => [...row]);\n\n  const alreadyChecked = new Map();\n  while (neighborsToReveal.length > 0) {\n    const newNighbors = [];\n    neighborsToReveal.forEach(([corX, corY]) => {\n      newGridState[corY][corX] = CELL_STATE.REVEALED;\n      if (gridData[corY][corX] > 0) return;\n\n      const neighbors = getNeighborsToReveal([corX, corY], {\n        gridState: newGridState,\n        settings,\n      });\n\n      const realNewNeighbors = neighbors.filter((cor) => !alreadyChecked.has(hash(cor)));\n\n      newNighbors.push(...realNewNeighbors);\n      neighbors.forEach((cor) => alreadyChecked.set(hash(cor), true));\n    });\n\n    neighborsToReveal = newNighbors;\n  }\n  return newGridState;\n};\n\nexport const checkIfWon = (flags = new Map(), gridData = [[]]) =>\n  Array.from(flags.values()).every(\n    ([flagXcor, flagYcor]) => gridData[flagYcor][flagXcor] === Infinity,\n  );\n\nexport const handleFlags = ({\n  flags = new Map(),\n  gridState = [[]],\n  isFlagRemoved,\n  cordinates: [corX, corY],\n}) => {\n  const newGridState = gridState.map((row) => [...row]);\n  const newFlagsState = new Map(flags);\n  const flagHash = hash([corX, corY]);\n  if (isFlagRemoved) {\n    newFlagsState.delete(flagHash, [corX, corY]);\n    newGridState[corY][corX] = CELL_STATE.HIDDEN;\n  } else {\n    newFlagsState.set(flagHash, [corX, corY]);\n    newGridState[corY][corX] = CELL_STATE.FLAGGED;\n  }\n  return { newGridState, newFlagsState };\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { Button, InputField } from '../Common';\nimport { ROUTES } from '../../utils';\nimport { StyledControls, ControlsLayout } from './styled';\nimport { MODES, defaultSettings } from './utils';\n\nconst Controls = ({ mode = MODES.PLAYING, onNewGame, usedFlags = 0, mines = 0 }) => {\n  const history = useHistory();\n  const [settings, setSettings] = useState(defaultSettings);\n\n  const handleInput = (e, fieldName) => {\n    setSettings({ ...settings, [fieldName]: e.target.value });\n  };\n\n  return (\n    <ControlsLayout>\n      <StyledControls>\n        <InputField\n          onChange={(e) => handleInput(e, 'width')}\n          placeholder=\"Grid Width\"\n          title=\"Width:\"\n          value={settings.width}\n        />\n        <InputField\n          onChange={(e) => handleInput(e, 'height')}\n          placeholder=\"Grid Height\"\n          title=\"Height:\"\n          value={settings.height}\n        />\n        <InputField\n          onChange={(e) => handleInput(e, 'mines')}\n          placeholder=\"Mines Amount\"\n          title=\"Mines:\"\n          value={settings.mines}\n        />\n      </StyledControls>\n\n      <StyledControls>\n        <Button\n          label=\"Rules\"\n          onClick={() => history.push(ROUTES.BASE)}\n          disabled={mode === MODES.PLAYING}\n        />\n        <Button label=\"Superman\" onClick={() => onNewGame({ ...settings, isSuperman: true })} />\n        <Button label=\"Reset\" onClick={() => onNewGame(settings)} />\n      </StyledControls>\n      <StyledControls>\n        <div>\n          <span>{`${mines - usedFlags}  🚩 Remaining`}</span>\n        </div>\n        <div>\n          <span>{`${mines} 💣 Total`}</span>\n        </div>\n      </StyledControls>\n    </ControlsLayout>\n  );\n};\n\nControls.propTypes = {\n  mode: PropTypes.string.isRequired,\n  mines: PropTypes.number.isRequired,\n  usedFlags: PropTypes.number.isRequired,\n  onNewGame: PropTypes.func.isRequired,\n};\n\nexport default Controls;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { StyledGrid, StyledCell } from './styled';\nimport { CELL_STATE } from './utils';\n\nconst getDisplayElement = (minesCount, state) => {\n  switch (state) {\n    case CELL_STATE.FLAGGED:\n      return '🚩';\n    case CELL_STATE.REVEALED:\n      return minesCount === Infinity ? '💣' : minesCount || '';\n    default:\n      return '';\n  }\n};\n\nconst Cell = ({ minesCount, state, corX, corY, onClick }) => {\n  return (\n    <StyledCell\n      onClick={() => onClick(corX, corY)}\n      disabled={state === CELL_STATE.REVEALED}\n      color={state === CELL_STATE.REVEALED && minesCount === Infinity ? 'red' : 'grey'}\n      $revealed={state === CELL_STATE.REVEALED}\n    >\n      <span style={{ color: minesCount > 1 ? 'red' : 'white', fontWeight: 600 }}>\n        {getDisplayElement(minesCount, state)}\n      </span>\n    </StyledCell>\n  );\n};\n\nconst MemoCell = React.memo(\n  Cell,\n  (prevProps, nextProps) =>\n    prevProps.state === nextProps.state && prevProps.minesCount === nextProps.minesCount,\n);\n\nconst Grid = ({ gridData = [[]], gridState = [[]], width, onCellClick }) => {\n  const cells = gridData.map((row, corY) =>\n    row.map((minesCount, corX) => (\n      <MemoCell\n        key={`${corX}-${corY}`}\n        minesCount={minesCount}\n        state={gridState[corY][corX]}\n        corX={corX}\n        corY={corY}\n        onClick={onCellClick}\n      />\n    )),\n  );\n  return <StyledGrid width={width}>{cells}</StyledGrid>;\n};\n\nGrid.propTypes = {\n  width: PropTypes.number.isRequired,\n  gridData: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)).isRequired,\n  gridState: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.number)).isRequired,\n  onCellClick: PropTypes.func.isRequired,\n};\n\nCell.propTypes = {\n  minesCount: PropTypes.number.isRequired,\n  state: PropTypes.number.isRequired,\n  corX: PropTypes.number.isRequired,\n  corY: PropTypes.number.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Grid;\n","import React, { useEffect, useReducer } from 'react';\nimport Controls from './Controls';\nimport Grid from './Grid';\nimport { GameLayout } from './styled';\nimport {\n  MODES,\n  defaultSettings,\n  validateSettings,\n  revealCells,\n  getMappedGridData,\n  CELL_STATE,\n  checkIfWon,\n  handleFlags,\n} from './utils';\n\nconst initialState = {\n  mode: MODES.PLAYING,\n  flags: new Map(),\n  settings: defaultSettings,\n  gridData: [[]],\n  gridState: [[]],\n  isShiftDown: false,\n};\n\nconst ACTIONS = {\n  NEW_GAME: 'new_game',\n  SHIFT_DOWN: 'shift_down',\n  GAME_MODE: 'game_mode',\n  CELL_CLICK: 'cell_click',\n};\n\nconst reducer = (state, { type, payload }) => {\n  switch (type) {\n    case ACTIONS.SHIFT_DOWN: {\n      return { ...state, isShiftDown: payload };\n    }\n    case ACTIONS.NEW_GAME: {\n      const settings = payload || state.settings;\n\n      const [mappedGrid, gridInitalState] = getMappedGridData(settings);\n      const newState = {\n        ...initialState,\n        settings,\n        gridData: mappedGrid,\n        gridState: gridInitalState,\n      };\n      if (settings.isSuperman) {\n        const revealedData = gridInitalState.map((row) => row.fill(CELL_STATE.REVEALED));\n        return { ...newState, gridState: revealedData };\n      }\n      return newState;\n    }\n    case ACTIONS.GAME_MODE: {\n      return { ...state, mode: payload };\n    }\n    case ACTIONS.CELL_CLICK: {\n      const [corX, corY] = payload;\n      const { flags, gridData, gridState, settings, isShiftDown, mode } = state;\n\n      if (mode !== MODES.PLAYING) return state;\n      if (!isShiftDown && gridState[corY][corX] === CELL_STATE.FLAGGED) return state;\n      if (isShiftDown) {\n        const isFlagRemoved = gridState[corY][corX] === CELL_STATE.FLAGGED;\n        if (!isFlagRemoved && flags.size === settings.mines) {\n          alert('Cant add any more flags');\n          return state;\n        }\n        const { newGridState, newFlagsState } = handleFlags({\n          flags,\n          gridState,\n          isFlagRemoved,\n          cordinates: [corX, corY],\n        });\n\n        return { ...state, flags: newFlagsState, gridState: newGridState };\n      } else {\n        const newGridState = revealCells([[corX, corY]], state);\n        const didLose = gridData[corY][corX] === Infinity;\n        if (didLose) alert('You Lost');\n\n        return { ...state, gridState: newGridState, mode: didLose ? MODES.LOST : MODES.PLAYING };\n      }\n    }\n    default:\n      return state;\n  }\n};\n\nconst Game = () => {\n  const [state, dispath] = useReducer(reducer, initialState);\n  const { flags, gridData, gridState, settings, mode } = state;\n\n  const handleNewGame = (settings = defaultSettings) => {\n    const [errorMessage, newSettings] = validateSettings(settings);\n    if (errorMessage) {\n      alert(errorMessage);\n    } else {\n      dispath({ type: ACTIONS.NEW_GAME, payload: newSettings });\n    }\n  };\n\n  useEffect(handleNewGame, []);\n\n  useEffect(() => {\n    if (flags.size === settings.mines) {\n      const won = checkIfWon(flags, gridData);\n      if (won) {\n        alert('You Won');\n        dispath({ type: ACTIONS.GAME_MODE, payload: MODES.WON });\n      }\n    }\n  }, [flags.size, settings.mines]);\n\n  const handleCellClick = (corX, corY) => {\n    dispath({ type: ACTIONS.CELL_CLICK, payload: [corX, corY] });\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Shift') {\n      dispath({ type: ACTIONS.SHIFT_DOWN, payload: true });\n    }\n  };\n\n  const handleKeyUp = (e) => {\n    if (e.key === 'Shift') {\n      dispath({ type: ACTIONS.SHIFT_DOWN, payload: false });\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyDown);\n    };\n  }, []);\n\n  return (\n    <GameLayout>\n      <Controls\n        usedFlags={flags.size}\n        mines={settings.mines}\n        mode={mode}\n        onNewGame={handleNewGame}\n      />\n      <Grid\n        width={settings.width}\n        gridData={gridData}\n        gridState={gridState}\n        onCellClick={handleCellClick}\n      />\n    </GameLayout>\n  );\n};\n\nexport default Game;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { Game, OnBoard } from './components/';\nimport { ROUTES } from './utils';\n\nconst App = () => {\n  return (\n    <Switch>\n      <Route path={ROUTES.PLAY}>\n        <Game />\n      </Route>\n      <Route path={ROUTES.BASE}>\n        <OnBoard />\n      </Route>\n    </Switch>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport { history } from './utils';\n\nReactDOM.render(\n    <Router history={history}>\n      <App />\n    </Router>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}